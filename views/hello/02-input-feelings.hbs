<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello</title>
    <meta content="Hello_NEW" property="og:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="/css/webflow.css" rel="stylesheet" type="text/css">
    <link href="/css/stephies-blank-site-a706d0.webflow.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Roboto:regular","Poppins:regular","Poppins:regular,500,600,700,800,900","Roboto:regular,500,700,900","Poppins:100,200,300,regular,500,600,700,800,900","Roboto:100,300,regular,500,700,900"]  }});</script>
    <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
    <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>

    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css"/>
    <script src="/javascripts/utils.js"></script>
    <script src="/javascripts/exit.js"></script>
</head>
<body onunload="" class="body-2 no-select">

<p class="paragraph-3">Hi <span id="name"></span></p>
<h1 class="heading-2">How do you feel?</h1>

{{> selection_area}}

<!--
<div id="default">
    <h1>Hi, <span id="name"></span></h1>
    <h1>How do you feel?</h1>
    {{> selection_area}}
</div>
-->

<script>
    let url = new URL(window.location.href);
    let name = url.searchParams.get("name");

    // set the name
    document.getElementById("name").innerText = name;

    // go back on 'restart'
    document.getElementById("restart").addEventListener("click", function() {
        window.location.assign("/hello/01-hello");
    });

    // selection area controls
    let point = {x: 0, y: 0};
    let nextElem = document.getElementById("next");
    let eventElem = document.getElementById("selection-events");
    eventElem.addEventListener('update', function(e) {
        point.x = e.detail.x;
        point.y = e.detail.y;
        nextElem.classList.remove("hide");
    });

    // go forward on 'done'
    document.getElementById("next").addEventListener("click", function() {
        fetch('/data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                displayID: name,
                x: point.x,
                y: point.y
            }),
        }).then((data) => {
            window.location.assign("/hello/03-thank-you?" + encodeGetParams({ name: name }));
        }).catch((error) => {
            window.location.assign("/hello/03-thank-you?"+ encodeGetParams({ name: name }));
        });
    });

    // go back to intro after timeout
    SetExitTimer();

</script>
<script src="/javascripts/selection.js"></script>

</body>
</html>